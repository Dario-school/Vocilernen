<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karteikarten ‚Äì Schulhilfen</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f3460 100%);min-height:100vh;padding:20px}
        .wrap{max-width:760px;margin:0 auto}
        .hdr{background:rgba(255,255,255,.08);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);border-radius:18px;padding:16px 22px;display:flex;align-items:center;gap:12px;margin-bottom:22px}
        .btn-back{background:rgba(255,255,255,.12);color:white;border:1px solid rgba(255,255,255,.25);padding:9px 16px;border-radius:18px;cursor:pointer;font-size:.88em;text-decoration:none}
        .btn-back:hover{background:rgba(255,255,255,.22)}
        .hdr-info{color:white}
        .hdr-title{font-size:1.1em;font-weight:800}
        .hdr-sub{font-size:.82em;color:rgba(255,255,255,.5)}

        .prog-bar{height:7px;background:rgba(255,255,255,.1);border-radius:4px;margin-bottom:20px;overflow:hidden}
        .prog-fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .3s}

        .stat-row{text-align:center;color:rgba(255,255,255,.6);margin-bottom:20px;font-size:.95em}
        .stat-row strong{color:white}

        .fc-wrap{perspective:1000px;margin-bottom:20px;cursor:pointer}
        .fc{position:relative;width:100%;height:300px;transition:transform .55s;transform-style:preserve-3d}
        .fc.flipped{transform:rotateY(180deg)}
        .fc-face{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:36px}
        .fc-front{background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.2)}
        .fc-back{background:linear-gradient(135deg,rgba(15,52,96,.85),rgba(83,52,131,.85));border:2px solid rgba(102,126,234,.5);transform:rotateY(180deg)}
        .fc-word{font-size:2.5em;font-weight:900;color:white;text-align:center;margin-bottom:10px}
        .fc-type{color:rgba(255,255,255,.45);font-style:italic}
        .fc-hint{color:rgba(255,255,255,.35);font-size:.85em;margin-top:18px}

        .btn-flip-big{width:100%;background:rgba(255,255,255,.1);color:white;border:1px solid rgba(255,255,255,.2);padding:14px;border-radius:14px;font-size:1em;font-weight:600;cursor:pointer;transition:background .2s;margin-bottom:14px}
        .btn-flip-big:hover{background:rgba(255,255,255,.2)}

        .eval-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:8px}
        .btn-nope{background:linear-gradient(135deg,#b71c1c,#c62828);color:white;border:none;padding:16px;border-radius:14px;font-size:1.05em;font-weight:700;cursor:pointer;transition:all .2s}
        .btn-nope:hover{transform:translateY(-3px)}
        .btn-know{background:linear-gradient(135deg,#2e7d32,#388e3c);color:white;border:none;padding:16px;border-radius:14px;font-size:1.05em;font-weight:700;cursor:pointer;transition:all .2s}
        .btn-know:hover{transform:translateY(-3px)}

        .results{display:none;text-align:center;padding:20px}
        .results.show{display:block}
        .res-pct{font-size:4em;font-weight:900;color:#667eea;margin-bottom:16px}
        .res-info{color:rgba(255,255,255,.7);margin-bottom:28px}
        .btn-row{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
        .btn{background:linear-gradient(135deg,#0f3460,#533483);color:white;border:none;padding:13px 26px;border-radius:22px;font-size:1em;font-weight:700;cursor:pointer}
        .btn-sec{background:rgba(255,255,255,.1);color:white;border:1px solid rgba(255,255,255,.25);padding:12px 22px;border-radius:22px;font-size:.95em;cursor:pointer}
        .kb-hint{text-align:center;color:rgba(255,255,255,.3);font-size:.8em;margin-top:10px}
    </style>
</head>
<body>
<div class="wrap">
    <div class="hdr">
        <a class="btn-back" href="index.html">‚Üê Zur√ºck</a>
        <div class="hdr-info">
            <div class="hdr-title">üé¥ Karteikarten</div>
            <div class="hdr-sub" id="hdrSub">Laden‚Ä¶</div>
        </div>
    </div>

    <div id="quizArea">
        <div class="prog-bar"><div class="prog-fill" id="progFill"></div></div>
        <div class="stat-row">Karte <strong id="curN">1</strong> von <strong id="totN">0</strong></div>

        <div class="fc-wrap" onclick="flip()">
            <div class="fc" id="fc">
                <div class="fc-face fc-front">
                    <div class="fc-word" id="fWord">‚Äì</div>
                    <div class="fc-type" id="fType"></div>
                    <div class="fc-hint">üîÑ Klicken zum Umdrehen</div>
                </div>
                <div class="fc-face fc-back">
                    <div style="color:rgba(255,255,255,.5);font-size:.85em;margin-bottom:10px">Antwort:</div>
                    <div class="fc-word" id="bWord">‚Äì</div>
                    <div class="fc-type" id="bType"></div>
                </div>
            </div>
        </div>

        <button class="btn-flip-big" id="flipBtn" onclick="flip()">üîÑ Umdrehen (Leertaste)</button>
        <div class="eval-row" id="evalRow" style="display:none">
            <button class="btn-nope" onclick="mark(false)">‚ùå Nicht gewusst</button>
            <button class="btn-know" onclick="mark(true)">‚úÖ Gewusst</button>
        </div>
        <div class="kb-hint">Tastatur: Leertaste = umdrehen &nbsp;|&nbsp; ‚Üê = Nein &nbsp;|&nbsp; ‚Üí = Ja</div>
    </div>

    <div class="results" id="results">
        <div class="res-pct" id="resPct">‚Äì</div>
        <div class="res-info" id="resInfo">‚Äì</div>
        <div class="btn-row">
            <button class="btn" onclick="restart()">üîÑ Nochmal</button>
            <button class="btn-sec" onclick="location.href='index.html'">üè† Startseite</button>
        </div>
    </div>
</div>

<script src="vocabulary-data.js"></script>
<script>
const P=new URLSearchParams(location.search);
const subject=P.get('subject'),unit=parseInt(P.get('unit')),dir=P.get('direction')||'to-german';
let voc=[],cur=0,known=0,isFlipped=false;

function init(){
    const all=getVocabularyData(subject,unit);
    if(!all||!all.length){alert('Keine Vokabeln.');history.back();return;}
    voc=[...all].sort(()=>Math.random()-.5);
    document.getElementById('hdrSub').textContent=(subject==='english'?'üá¨üáß Englisch':'üá´üá∑ Fran√ßais')+' ‚Äì Unit '+unit;
    document.getElementById('totN').textContent=voc.length;
    show();
}

function show(){
    if(cur>=voc.length){done();return;}
    const v=voc[cur];
    document.getElementById('fWord').textContent=dir==='to-german'?v.foreign:v.german;
    document.getElementById('fType').textContent=v.type||'';
    document.getElementById('bWord').textContent=dir==='to-german'?v.german:v.foreign;
    document.getElementById('bType').textContent=v.type||'';
    document.getElementById('curN').textContent=cur+1;
    document.getElementById('progFill').style.width=(cur/voc.length*100)+'%';
    document.getElementById('fc').classList.remove('flipped');
    document.getElementById('flipBtn').style.display='block';
    document.getElementById('evalRow').style.display='none';
    isFlipped=false;
}

function flip(){
    if(isFlipped)return;
    isFlipped=true;
    document.getElementById('fc').classList.add('flipped');
    document.getElementById('flipBtn').style.display='none';
    document.getElementById('evalRow').style.display='grid';
}

function mark(yes){
    if(yes)known++;
    cur++;
    show();
}

function done(){
    document.getElementById('quizArea').style.display='none';
    const pct=Math.round(known/voc.length*100);
    document.getElementById('resPct').textContent=pct+'%';
    document.getElementById('resInfo').textContent=`${known} von ${voc.length} als "gewusst" markiert`;
    document.getElementById('results').classList.add('show');
}

function restart(){
    voc=[...getVocabularyData(subject,unit)].sort(()=>Math.random()-.5);
    cur=0;known=0;
    document.getElementById('quizArea').style.display='block';
    document.getElementById('results').classList.remove('show');
    show();
}

document.addEventListener('keydown',e=>{
    if(document.getElementById('results').classList.contains('show'))return;
    if(e.key===' '||e.key==='Enter'){e.preventDefault();flip();}
    else if(e.key==='ArrowRight'||e.key==='y'||e.key==='j')mark(true);
    else if(e.key==='ArrowLeft'||e.key==='n')mark(false);
});

init();
</script>
</body>
</html>
